
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Firmware Upgrade &#8212; Black Magic Debug  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="_static/asciinema-player_2.6.1.css" />
    <link rel="stylesheet" type="text/css" href="_static/asciinema-custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/platformpicker.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/asciinema-player_2.6.1.js"></script>
    <script src="_static/platformpicker.js"></script>
    <link rel="canonical" href="https://black-magic.org/upgrade.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="FAQ" href="knowledge/faq.html" />
    <link rel="prev" title="Getting Started" href="getting-started.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="firmware-upgrade">
<h1>Firmware Upgrade<a class="headerlink" href="#firmware-upgrade" title="Permalink to this heading">¶</a></h1>
<section id="linux-macos">
<h2>Linux / MacOS<a class="headerlink" href="#linux-macos" title="Permalink to this heading">¶</a></h2>
<section id="dfu-util">
<h3>DFU-Util<a class="headerlink" href="#dfu-util" title="Permalink to this heading">¶</a></h3>
<p>Download or compile a Black Magic Debug (BMD) firmware. Regarding firmware selection:</p>
<ul class="simple">
<li><p>You can find the newest pre-built binaries on the <a class="reference external" href="https://github.com/blackmagic-debug/blackmagic/releases">GitHub Release Page</a>.</p></li>
<li><p>You can find the bleeding cutting edge binaries uploaded as assets on the <a class="reference external" href="https://github.com/blackmagic-debug/blackmagic/actions/workflows/build-and-upload.yml">“build and upload” GitHub actions page</a>, Click on the newest successful build and download the <code class="docutils literal notranslate"><span class="pre">blackmagic-firmware.zip</span></code> file. It contains binaries for all the supported platforms.</p></li>
<li><p>When using the daily builds expect breaking changes. Please report issues on <a class="reference external" href="https://github.com/blackmagic-debug/blackmagic/issues">our issue page</a> or ask on our Discord server.</p></li>
</ul>
<p>Plug in the Black Magic Probe into your computer and run the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">dfu</span><span class="o">-</span><span class="n">util</span> <span class="o">-</span><span class="n">d</span> <span class="mi">1</span><span class="n">d50</span><span class="p">:</span><span class="mi">6018</span><span class="p">,:</span><span class="mi">6017</span> <span class="o">-</span><span class="n">s</span> <span class="mh">0x08002000</span><span class="p">:</span><span class="n">leave</span> <span class="o">-</span><span class="n">D</span> <span class="n">blackmagic</span><span class="o">-</span><span class="n">native</span><span class="o">.</span><span class="n">bin</span>
</pre></div>
</div>
<p>You will need to install <a class="reference external" href="http://dfu-util.sourceforge.net/"><code class="docutils literal notranslate"><span class="pre">dfu-util</span></code></a> package. On MacOS you can use homebrew, macports or fink depending on your preferred package manager. You will need version 0.8.0 or greater to support the dfuse commands.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If <code class="docutils literal notranslate"><span class="pre">dfu-util</span></code> fails to switch your BMP into bootloader mode, or you feel like you might have <strong>bricked</strong> your BMP, you can also plug in your BMP while holding down the button. This will force the BMP to stay in the bootloader on power up.</p>
</div>
</section>
</section>
<section id="windows">
<h2>Windows<a class="headerlink" href="#windows" title="Permalink to this heading">¶</a></h2>
<section id="id1">
<h3>DFU-Util<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h3>
<p>Download or compile a Black Magic Probe (BMP) firmware.</p>
<p>Plug in the Black Magic Probe into your computer and run the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dfu</span><span class="o">-</span><span class="n">util</span><span class="o">.</span><span class="n">exe</span> <span class="o">-</span><span class="n">d</span> <span class="mi">1</span><span class="n">d50</span><span class="p">:</span><span class="mi">6018</span><span class="p">,:</span><span class="mi">6017</span> <span class="o">-</span><span class="n">s</span> <span class="mh">0x08002000</span><span class="p">:</span><span class="n">leave</span> <span class="o">-</span><span class="n">D</span> <span class="n">blackmagic</span><span class="o">.</span><span class="n">bin</span>
</pre></div>
</div>
<p>You will need to download the Windows release of <a class="reference external" href="http://dfu-util.sourceforge.net/"><code class="docutils literal notranslate"><span class="pre">dfu-util</span></code></a> package.</p>
<p>You may need use <a class="reference external" href="https://tracker.iplocation.net/icsj/">Zadig</a> to install the WinUSB driver. Both PID 0x6017 and 0x6018 need to be known to  <a class="reference external" href="https://tracker.iplocation.net/icsj/">Zadig</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On first run Zadig may not see the 6017 PID. Once the dfu exe runs and detaches the device, it should appear in Zadig. Install the WinUSB driver on it and re-run the dfu exe.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If <code class="docutils literal notranslate"><span class="pre">dfu-util</span></code> fails to switch your BMP into bootloader mode, or you feel like you might have <strong>bricked</strong> your BMP, you can also plug in your BMP while holding down the button. This will force the BMP to stay in the bootloader on power up.</p>
</div>
</section>
</section>
<section id="using-stm32-mem-py">
<h2>Using stm32-mem.py<a class="headerlink" href="#using-stm32-mem-py" title="Permalink to this heading">¶</a></h2>
<p>An alternative solution is using <code class="docutils literal notranslate"><span class="pre">stm32_mem.py</span></code> script included in the Black Magic Debug source repository. It is not the recommended way of updating the Black Magic Probe as <code class="docutils literal notranslate"><span class="pre">dfu-util</span></code> is easier to install without the need to clone the Black Magic Debug repository and all the associated source code.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">blackmagic</span> <span class="o">&amp;&amp;</span> <span class="n">scripts</span><span class="o">/</span><span class="n">stm32_mem</span><span class="o">.</span><span class="n">py</span> <span class="n">blackmagic</span><span class="o">.</span><span class="n">bin</span>
</pre></div>
</div>
<section id="built-in-upgrade-tool">
<h3>Built-in Upgrade tool<a class="headerlink" href="#built-in-upgrade-tool" title="Permalink to this heading">¶</a></h3>
<p>Instructions for Linux in <a class="reference external" href="https://github.com/blacksphere/blackmagic/wiki/Hacking#updating-firmware">hacking section</a></p>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Black Magic Debug</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Intro</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="hardware.html">Supported Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Firmware Upgrade</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Knowledgebase</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="knowledge/faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="knowledge/terminology.html">Terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="knowledge/links.html">Links</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="usage/gdb-commands.html">GDB Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage/gdb-automation.html">GDB Flash Automation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage/semihosting.html">Semihosting</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage/traceswo.html">SWD - TRACESWO support</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage/swo.html">Serial Wire Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage/platformio.html">PlatformIO</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Target Specific Usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="target-usage/stm32.html">STM32 Targets</a></li>
<li class="toctree-l1"><a class="reference internal" href="target-usage/sam3x-4x-x7x.html">SAM3x-4x-x7x</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Hacking</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="hacking/contrib.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="hacking/hacking.html">Firmware Hacking</a></li>
<li class="toctree-l1"><a class="reference internal" href="hacking/target-drivers.html">Adding Target Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="hacking/target-cortex-m.html">Cortex M Targets</a></li>
<li class="toctree-l1"><a class="reference internal" href="hacking/target-cortex-a.html">Cortex A Targets</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="getting-started.html" title="previous chapter">Getting Started</a></li>
      <li>Next: <a href="knowledge/faq.html" title="next chapter">FAQ</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, Piotr Esden-Tempski <piotr@esden.net>; 2022, Rachel Mant <git@dragonmux.network>.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.0.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>